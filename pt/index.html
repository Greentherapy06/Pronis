<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Green-Therapy â€“ CBD Premium</title>
  <meta name="description" content="Especialista em CBD premium desde 2019: flores, resinas, Ã³leos e infusÃµes de alta qualidade. Produtos naturais selecionados na ItÃ¡lia.">
  <meta name="robots" content="index, follow">
  <meta name="author" content="Green-Therapy">
  <link rel="icon" href="../favicon.ico" type="image/x-icon" />

  <!-- PrÃ©connexion CDN -->
  <link rel="preconnect" href="https://cdn.snipcart.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>

  <!-- CSS principal -->
  <link rel="stylesheet" href="../style.css" />

  <!-- CSS Snipcart prÃ©chargÃ© -->
  <link rel="preload" href="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.css" as="style" onload="this.onload=null;this.rel='stylesheet';"/>
  <noscript><link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.css" /></noscript>

  <!-- Snipcart Configuration -->
  <script>
    window.SnipcartSettings = {
      publicApiKey: "MjUwNWU1NDctZmQwOC00YmEwLTlkMTItMWMxZmYyYWI5MzdhNjM4ODk3NzU4MjkzMjE0MDQ3",
      loadStrategy: "on-user-interaction"
    };
  </script>

  <!-- Regras locais -->
  <style>
    .header-panier{ text-align:left; margin-top:10px; margin-left:100px; }
    .panier-btn{ background:none; border:none; color:#d4af37; font-size:16px; cursor:pointer; }
    .product-card .cta-cart{ background:#000; color:#d4af37; font-weight:700; padding:8px 12px; border-radius:8px; border:1px solid #000; cursor:pointer; transition:opacity .2s ease; display:inline-flex; align-items:center; gap:.5rem; }
    .product-card .cta-cart:hover{ opacity:.9; }
    .stock-label{ margin-top:6px; font-size:.9rem; }
    .stock-out{ color:#b00020; }
    .stock-in{ color:#2e7d32; }
    .btn-disabled{ opacity:.55; cursor:not-allowed; }
  </style>
</head>

<body>
  <!-- Header -->
  <header>
    <div class="logo-container">
      <img src="../logo-rond.png" alt="Logo Green Therapy - CBD Premium" class="logo" loading="lazy" width="80" height="80" />
      <h1>Green-Therapy</h1>
    </div>

    <nav>
      <a href="#home">ğŸ  InÃ­cio</a>
      <a href="#produits">ğŸ›ï¸ Produtos</a>
      <a href="#contact">âœ‰ï¸ Contato</a>
      <a href="../index.html" hreflang="fr">ğŸ‡«ğŸ‡· FrancÃªs</a>
    </nav>

    <div class="header-panier">
      <button class="snipcart-checkout panier-btn">ğŸ›’ Ver carrinho</button>
    </div>
  </header>

  <!-- InÃ­cio -->
  <section id="home" class="section">
    <h2>
      <span style="display:inline-block; text-align:center;">
        <span style="display:block;">ğŸŒ¿ Green-Therapy ğŸŒ¿</span>
        <span style="display:block;">CBD Premium</span>
      </span>
    </h2>
    <p>Especialista em CBD desde 2019, selecionamos na ItÃ¡lia flores de CBD premium, Ã³leos de CBD full spectrum, resinas e infusÃµes. Descubra produtos naturais e de qualidade para um momento de relaxamento autÃªntico.</p>
  </section>

  <!-- Produtos -->
  <section id="produits" class="section">
    <h2>ğŸ›ï¸ Nossos Produtos</h2>
    <!-- Nota legal curta -->
    <p style="font-size:.9rem;opacity:.85;margin-top:-6px;">
      Conforme a legislaÃ§Ã£o da UE: <strong>THC &lt; 0,3%</strong> â€¢ sem efeitos psicoativos.
    </p>

    <div class="product-grid">

      <!-- Produto 1 -->
      <div class="product-card" data-id="amnesia-cbd" data-stock="0">
        <picture>
          <source srcset="../amnesia-cbd.webp" type="image/webp" />
          <img src="../amnesia-cbd.jpg" alt="Flor CBD Amnesia - ItÃ¡lia" class="product-img" loading="lazy" width="400" height="400" />
        </picture>
        <h3>ğŸŒ¿ Flor CBD Amnesia ğŸ‡®ğŸ‡¹</h3>
        <!-- descriÃ§Ã£o acima do preÃ§o -->
        <p style="margin:.4rem 0 .2rem 0;">
          Perfil aromÃ¡tico cÃ­trico e terroso, colhida e aparada Ã  mÃ£o na ItÃ¡lia.
          Secagem lenta que preserva a <em>cor natural do cÃ¢nhamo</em> e o sabor autÃªntico.
          Perfeita para relaxar ao fim do dia. <strong>THC &lt; 0,3%</strong>.
        </p>
        <p class="price">A partir de 8,90 â‚¬</p>
        <select id="amnesia-quantite" aria-label="Escolher quantidade para Flor CBD Amnesia">
          <option value="2" selected>2g â€“ 8,90 â‚¬</option>
          <option value="4">4g â€“ 17,00 â‚¬</option>
          <option value="6">6g â€“ 24,00 â‚¬</option>
          <option value="8">8g â€“ 30,00 â‚¬</option>
          <option value="10">10g â€“ 40,00 â‚¬</option>
        </select>
        <button class="cta-cart" onclick="ajouterProduit('amnesia-cbd','Flor CBD Amnesia','Flor CBD premium da ItÃ¡lia','amnesia-quantite')">
          ğŸ›’ Adicionar ao carrinho
        </button>
      </div>

      <!-- Produto 2 -->
      <div class="product-card" data-id="resine-cbd" data-stock="0">
        <picture>
          <source srcset="../resine-cbd.webp" type="image/webp" />
          <img src="../resine-cbd.jpg" alt="Resina CBD Hash - ItÃ¡lia" class="product-img" loading="lazy" width="400" height="400" />
        </picture>
        <h3>ğŸŒ´ Resina CBD Hash ğŸ‡®ğŸ‡¹</h3>
        <!-- descriÃ§Ã£o acima do preÃ§o -->
        <p style="margin:.4rem 0 .2rem 0;">
          Textura cremosa e aromas de especiarias e pinho. ProduÃ§Ã£o artesanal com
          <em>prensagem a frio</em> para conservar os terpenos. Origem ItÃ¡lia,
          sabor redondo e relaxante. <strong>THC &lt; 0,3%</strong>.
        </p>
        <p class="price">A partir de 7,50 â‚¬</p>
        <select id="resine-quantite" aria-label="Escolher quantidade para Resina CBD Hash">
          <option value="2" selected>2g â€“ 7,50 â‚¬</option>
          <option value="4">4g â€“ 14,00 â‚¬</option>
          <option value="6">6g â€“ 20,00 â‚¬</option>
          <option value="8">8g â€“ 26,00 â‚¬</option>
          <option value="10">10g â€“ 32,00 â‚¬</option>
        </select>
        <button class="cta-cart" onclick="ajouterProduit('resine-cbd','Resina CBD Hash','Resina CBD premium da ItÃ¡lia','resine-quantite')">
          ğŸ›’ Adicionar ao carrinho
        </button>
      </div>

      <!-- Produto 3 -->
      <div class="product-card" data-id="cherry-cbd" data-stock="0">
        <picture>
          <source srcset="../cherry-cbd.webp" type="image/webp" />
          <img src="../cherry-cbd.jpg" alt="Flor CBD Cherry - ItÃ¡lia" class="product-img" loading="lazy" width="400" height="400" />
        </picture>
        <h3>ğŸ’ Flor CBD Cherry ğŸ‡®ğŸ‡¹</h3>
        <!-- descriÃ§Ã£o acima do preÃ§o -->
        <p style="margin:.4rem 0 .2rem 0;">
          Notas frutadas de cereja madura, flores densas e resinosas.
          Cultivo controlado na ItÃ¡lia para um sabor doce e limpo, com final suave.
          <strong>THC &lt; 0,3%</strong>.
        </p>
        <p class="price">A partir de 9,50 â‚¬</p>
        <select id="cherry-quantite" aria-label="Escolher quantidade para Flor CBD Cherry">
          <option value="2" selected>2g â€“ 9,50 â‚¬</option>
          <option value="4">4g â€“ 18,00 â‚¬</option>
          <option value="6">6g â€“ 26,00 â‚¬</option>
          <option value="8">8g â€“ 33,00 â‚¬</option>
          <option value="10">10g â€“ 40,00 â‚¬</option>
        </select>
        <button class="cta-cart" onclick="ajouterProduit('cherry-cbd','Flor CBD Cherry','Flor CBD Cherry premium da ItÃ¡lia','cherry-quantite')">
          ğŸ›’ Adicionar ao carrinho
        </button>
      </div>

    </div>
  </section>

  <!-- OpiniÃµes -->
  <section id="avis" class="section">
    <h2>â­ OpiniÃµes de Clientes</h2>
    <div class="avis-grid">
      <div class="avis-card">
        <p class="avis-texte">â€œEntrega rÃ¡pida e discreta, flores de qualidade excepcional. Recomendo 100%!â€</p>
        <div class="avis-stars" aria-label="AvaliaÃ§Ã£o 5 estrelas">â­â­â­â­â­</div>
        <p class="avis-nom">â€“ Julien M.</p>
      </div>
      <div class="avis-card">
        <p class="avis-texte">â€œUma verdadeira descoberta! O Ã³leo de CBD ajuda-me a dormir melhor. Atendimento excelente.â€</p>
        <div class="avis-stars" aria-label="AvaliaÃ§Ã£o 5 estrelas">â­â­â­â­â­</div>
        <p class="avis-nom">â€“ Sophie L.</p>
      </div>
      <div class="avis-card">
        <p class="avis-texte">â€œExcelente relaÃ§Ã£o qualidade/preÃ§o. Sabor, aroma, relaxamentoâ€¦ tudo perfeito.â€</p>
        <div class="avis-stars" aria-label="AvaliaÃ§Ã£o 5 estrelas">â­â­â­â­â­</div>
        <p class="avis-nom">â€“ Karim B.</p>
      </div>
    </div>
  </section>

  <!-- Contato -->
  <section id="contact" class="section">
    <h2>âœ‰ï¸ Contato</h2>
    <p>Entre em contato conosco para qualquer dÃºvida ou pedido especial.</p>
    <p><a href="mailto:greentherapy06@gmail.com" title="Envie-nos um e-mail">ğŸ“§ greentherapy06@gmail.com</a></p>
  </section>

  <!-- Snipcart (hidden) -->
  <div hidden id="snipcart"
    data-api-key="MjUwNWU1NDctZmQwOC00YmEwLTlkMTItMWMxZmYyYWI5MzdhNjM4ODk3NzU4MjkzMjE0MDQ3"
    data-config-modal-style="side"
    data-currency="eur">
  </div>

  <!-- PreÃ§os + Stock + Snipcart (unificado) -->
  <script>
    const prixParProduit = {
      "amnesia-cbd": {2: 8.90, 4: 17.00, 6: 24.00, 8: 30.00, 10: 40.00},
      "resine-cbd":  {2: 7.50, 4: 14.00, 6: 20.00, 8: 26.00, 10: 32.00},
      "cherry-cbd":  {2: 9.50, 4: 18.00, 6: 26.00, 8: 33.00, 10: 40.00}
    };
    const LANG = (document.documentElement.lang || 'pt').toLowerCase();
    const TXT = LANG.startsWith('pt')
      ? { instock: 'Em stock: ', out: 'Esgotado' }
      : { instock: 'En stock : ', out: 'Rupture de stock' };

    function getStock(id) {
      const card = document.querySelector(`.product-card[data-id="${id}"]`);
      if (!card) return 0;
      const n = parseInt(card.getAttribute('data-stock'), 10);
      return isNaN(n) ? 0 : n;
    }

    function renderStocks(){
      document.querySelectorAll('.product-card').forEach(card => {
        const id = card.dataset.id;
        if (!id) return;

        let label = card.querySelector('.stock-label');
        if (!label){
          label = document.createElement('div');
          label.className = 'stock-label';
          card.appendChild(label);
        }
        const btn = card.querySelector('.cta-cart');
        const n = getStock(id);

        if (n <= 0){
          label.textContent = TXT.out;
          label.classList.remove('stock-in'); label.classList.add('stock-out');
          if (btn){ btn.setAttribute('disabled','disabled'); btn.classList.add('btn-disabled'); btn.title = TXT.out; }
        } else {
          label.textContent = TXT.instock + n;
          label.classList.remove('stock-out'); label.classList.add('stock-in');
          if (btn){ btn.removeAttribute('disabled'); btn.classList.remove('btn-disabled'); btn.removeAttribute('title'); }
        }
      });
    }
    document.addEventListener('DOMContentLoaded', renderStocks);

    function ensureSnipcartReady(cb){
      if (window.Snipcart && window.Snipcart.api) return cb();
      if (typeof loadSnipcart === 'function') loadSnipcart();
      const start = Date.now();
      const t = setInterval(() => {
        if (window.Snipcart && window.Snipcart.api) { clearInterval(t); cb(); }
        if (Date.now() - start > 5000) { clearInterval(t); }
      }, 100);
    }

    function ajouterProduit(idBase, nomBase, description, selectId) {
      if (getStock(idBase) <= 0){
        alert(TXT.out);
        return;
      }
      const quantite = document.getElementById(selectId).value;
      const prix = prixParProduit[idBase][quantite];
      const id = `${idBase}-${quantite}g`;
      const nom = `${nomBase} ${quantite}g`;

      ensureSnipcartReady(() => {
        Snipcart.api.cart.items.add({ id, name: nom, price: prix, url: '/', description });
      });
    }
  </script>

  <!-- Carregamento adiado do Snipcart -->
  <script>
    let snipcartLoaded = false;
    function loadSnipcart() {
      if (snipcartLoaded) return;
      snipcartLoaded = true;
      const script = document.createElement("script");
      script.src = "https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.js";
      script.async = true;
      document.body.appendChild(script);
    }
    window.addEventListener("scroll", loadSnipcart, { once: true });
    document.addEventListener("click", loadSnipcart, { once: true });
  </script>

  <footer style="text-align:center; padding:20px; font-size:14px;">
    <a href="../mentions-legales.html">Aviso legal</a> |
    <a href="../politique-confidentialite.html">PolÃ­tica de Privacidade</a> |
    <a href="../cookies.html">Cookies</a>
  </footer>
</body>
</html>
